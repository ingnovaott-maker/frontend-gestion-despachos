<div class="py-2 px-sm-3 px-md-4 px-lg-5 margen">
  <div class="d-block mb-3">
    <h2>Listado de vigilados - {{nombreModulo}}</h2>
  </div>
  <div class="d-flex mb-3">
    <div class="search-container">
      <!-- Input para buscar por ID -->
      <label for="filtro">Filtrar vigilados</label>
      <div class="contenedor-input-botones">
        <div class="search-input-wrapper">
          <app-input-busqueda (buscar)="filtrarVigilados()" [placeholder]="'Nit, Razón social...'" [(ngModel)]="filteredID"></app-input-busqueda>
        </div>
        <button type="button" class="boton primario relleno" (click)="limpiar()">
          Limpiar
        </button>
      </div>
    </div>
  </div>
  <div class="d-block mb-3">
    <div class="d-flex mx-0 table-container">
      <table class="table custom-scroll">
        <thead class="encabezado">
          <tr>
            <th style="width: 100px; text-align: center;">
              <span (click)="sortBy('nit')" style="cursor: pointer;">
                Nit
                <i [ngClass]="{'fa fa-sort': sortField !== 'nit' || sortDirection === '', 'bi bi-arrow-up': sortField === 'nit' && sortDirection === 'asc', 'bi bi-arrow-down': sortField === 'nit' && sortDirection === 'desc'}"></i>
              </span>
            </th>
            <th style="width: 100px; text-align: center;">
              <span (click)="sortBy('razon_social')" style="cursor: pointer;">
                Razón social
                <i [ngClass]="{'fa fa-sort': sortField !== 'razon_social' || sortDirection === '', 'bi bi-arrow-up': sortField === 'razon_social' && sortDirection === 'asc', 'bi bi-arrow-down': sortField === 'razon_social' && sortDirection === 'desc'}"></i>
              </span>
            </th>
            <th style="width: 100px; text-align: center;">
              <span (click)="sortBy('correo')" style="cursor: pointer;">
                Correo
                <i [ngClass]="{'fa fa-sort': sortField !== 'correo' || sortDirection === '', 'bi bi-arrow-up': sortField === 'correo' && sortDirection === 'asc', 'bi bi-arrow-down': sortField === 'correo' && sortDirection === 'desc'}"></i>
              </span>
            </th>
            <!-- <th style="width: 100px; text-align: center;">
              <span (click)="sortBy('estado')" style="cursor: pointer;">
                Estado
                <i [ngClass]="{'fa fa-sort': sortField !== 'estado' || sortDirection === '', 'bi bi-arrow-up': sortField === 'estado' && sortDirection === 'asc', 'bi bi-arrow-down': sortField === 'estado' && sortDirection === 'desc'}"></i>
              </span>
            </th>
            <th style="width: 100px; text-align: center;">
              <span (click)="sortBy('fecha_envio')" style="cursor: pointer;">
                Fecha de entrega
                <i [ngClass]="{'fa fa-sort': sortField !== 'fecha_envio' || sortDirection === '', 'bi bi-arrow-up': sortField === 'fecha_envio' && sortDirection === 'asc', 'bi bi-arrow-down': sortField === 'fecha_envio' && sortDirection === 'desc'}"></i>
              </span>
            </th> -->
            <!-- <th style="width: 100px; text-align: center;"><span>Total de rutas</span></th> -->
            <th style="width: 100px; text-align: center;"><span>Acciones</span></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="loading">
            <td colspan="7" style="text-align: center;">Cargando...</td>
          </tr>
          <tr *ngIf="!loading && vigiladosMostrados.length === 0">
            <td colspan="7" style="text-align: center;">No se encontraron registros</td>
          </tr>
          <ng-container *ngIf="!loading">
            <tr *ngFor="let vigilado of vigiladosMostrados | paginate: { itemsPerPage: itemsPerPage, currentPage: pageRutas, id:'Ruta' }; let i = index">
              <td style="width: 100px; text-align: center;">{{ vigilado.nit }}</td>
              <td style="width: 100px; text-align: center;">{{ vigilado.razon_social }}</td>
              <td style="width: 100px; text-align: center;">{{ vigilado.correo }}</td>
              <!-- <td style="width: 100px; text-align: center;">{{ vigilado.estado }}</td>
              <td style="width: 100px; text-align: center;">{{ vigilado.fecha_envio ? (vigilado.fecha_envio | date:'dd-MM-yyyy') : '-' }}</td>
              <td style="width: 100px; text-align: center;">{{ vigilado.total_rutas }}</td> -->
              <td style="width: 100px; text-align: center;">
                <!-- [disabled]="vigilado.estado === 'No Iniciado'" -->
                <button *ngIf="tipoRuta != 4" type="button" class="boton primario relleno" (click)="redirigir(vigilado,tipoRuta, 1)"
                 title="Historial de archivos" style="margin-left: 10px;">
                  <i class="bi bi-folder-symlink"></i>
                </button>
                <button type="button" class="boton primario relleno" (click)="redirigir(vigilado,tipoRuta, 2)"
                 title="Registros" style="margin-left: 10px;">
                 <i class="bi bi-card-checklist"></i>
                </button>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
    <div class="d-flex justify-content-center">
      <!-- Paginador -->
      <pagination-controls class="pagination-controls"
        (pageChange)="pageRutas = $event" previousLabel="Anterior"
        nextLabel="Siguiente" [maxSize]="7" [directionLinks]="true" [autoHide]="false" #paginador1 id="Ruta">
      </pagination-controls>
    </div>
  </div>
</div>

