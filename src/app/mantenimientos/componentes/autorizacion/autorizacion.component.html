<div class="py-2 px-sm-3 px-md-4 px-lg-5 margen">
  <h2 *ngIf="isSupervisor">Registros de autorizaciones</h2>
  <div class="d-block mb-3">
    <div class="d-flex">
      <table class="informacion tabla-informacion ">
        <thead>
          <tr>
            <th colspan="2" style="text-align: center !important;">Información del formulario</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="fw-semibold titulo-fila" style="width: 150px !important;">Nit</td>
            <td>
              <ng-container>
                {{usuario?.usuario}}
              </ng-container>
            </td>
          </tr>
          <tr>
            <td class="fw-semibold titulo-fila" style="width: 150px !important;">Razón social</td>
            <td>
              <ng-container>
                {{usuario?.nombre}}
              </ng-container>
            </td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="rol?.id !== 3" class="d-block mb-3" style="margin-left: 50px;">
        <button type="button" class="boton primario delineado" (click)="volver()" style="position: absolute; right: 45px;">
          Volver
        </button>
      </div>
      </div>
    <br/>
    <div class="search-container">
      <!-- Input para buscar por ID -->
      <label for="filtro">Filtrar por placa y estado</label>
      <div class="contenedor-input-botones">
        <div class="search-input-wrapper">
          <app-input-busqueda (buscar)="filtrarRegistros()" [placeholder]="'Buscar'" [(ngModel)]="filteredID"></app-input-busqueda>
        </div>
        <button type="button" class="boton primario relleno" (click)="limpiar()">
          Limpiar
        </button>
      </div>
    </div>
  </div>
  <br/>
  <div class="ruta w-100 custom-scroll">
    <div class="d-flex mx-0 table-container">
      <table class="table custom-scroll">
        <thead class="encabezado">
          <tr>
            <th class="th-listado">
              N°
            </th>
            <th class="th-listado">
              Placa
            </th>
            <th class="th-listado">
              Fecha registro
            </th>
            <th class="th-listado">
              Estado de la autorización de viaje
            </th>
            <th class="th-listado">
              Acciones
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let registro of listarRegistrosFiltrados | paginate: { itemsPerPage: itemsPerPagePrevent, currentPage: pagePrevent, id:'formularioAutorizacion' }; let i = index">
            <td style="width: 100px; text-align: center;">
              {{(pagePrevent - 1) * itemsPerPagePrevent + i + 1 }}
            </td>
            <td style="width: 100px; text-align: center;">
              {{registro.placa}}
            </td>
            <td style="width: 100px; text-align: center;">
              {{registro.fechaDiligenciamiento ? (registro.fechaDiligenciamiento | date:'dd/MM/yyyy':'UTC') : '' }}
            </td>
            <td style="width: 100px; text-align: center;">
              {{registro.estadoMantenimiento}}
            </td>
            <td style="width: 100px; text-align: center;">
              <button *ngIf="!isSupervisor" type="button" class="boton primario relleno" title="Nuevo reporte" (click)="abrirRegistro(registro, false, false)"><i class="bi-file-earmark-plus"></i></button>
              <button type="button" class="boton primario relleno" title="Historial" (click)="abrirRegistro(registro,true,true)" style="margin-left: 10px;"><i class="bi bi-journal-text"></i></button>
            </td>
          </tr>
          <tr *ngIf="listarRegistros.length === 0">
            <td colspan="5" style="text-align: center;">No hay vehículos</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="d-flex justify-content-center">
      <!-- Paginador -->
      <pagination-controls class="pagination-controls"
        (pageChange)="pagePrevent = $event" previousLabel="Anterior"
        nextLabel="Siguiente" [maxSize]="7" [directionLinks]="true" [autoHide]="false" #paginador1 id="formularioAutorizacion">
      </pagination-controls>
    </div>
  </div>
  </div>
